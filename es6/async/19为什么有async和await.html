<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 1: prmise .then 太多了。也容易乱
        // 2：做不到好好管理代码  
        // 所以有  async awiat 函数

        // 异步编写代码 进步的过程
        // 回调函数编写---->promise ---->generater 函数 ----->async await


        // async function foo() {
        //     console.log('111');
        //     return 123
        // }

        // // 1: async 函数的返回值 是 promise 
        // let res = foo();
        // console.log('22222');
        // // 2: 如何接收return 的 123 ?

        // let cb = (data) => {
        //     console.log('333');
        //     console.log('接收了 async 的return', data);
        // }

        // // 方式1

        // res.then(cb)

        // // 方式2 

        // let cb1 = async () => {
        //     let res = await foo();
        //     console.log('5555');
        //     console.log('awiait', res);
        // }
        // cb1();
        // console.log('44444');


        // 1: await 函数执行
        // 2：await promise实例
        // 3：await 只能在 async 函数中编写


        // async  await 是异步程序

        // 问题：async  await 到底谁是执行慢的程序？？？

        // async 方法体中代码 同步执行
        // await 是异步执行，有阻塞行为
        // 在同一个 async 函数中。await 可以阻止下面代码执行，
        // 需要等一个 await 执行完毕后；执行下一个await,以及下一行代码


    </script>
</body>


<script>
    function promise1() {
        return new Promise((resolve, reject) => {
            console.log('异步任务一 开始');
            setTimeout(() => {
                console.log('任务一 有结果了');
                resolve('success one')
            }, 1000);
        })
    }

    function promise2() {
        return new Promise((resolve, reject) => {
            console.log('异步任务二 开始');
            setTimeout(() => {
                console.log('任务二 有结果了');
                resolve('success 2')
            }, 2000);
        })
    }

    function promise3() {
        return new Promise((resolve, reject) => {
            console.log('异步任务三 开始');
            setTimeout(() => {
                console.log('任务三 有结果了');
                resolve('success 3')
            }, 2000);
        })
    }

    // promise1().then((res)=>{
    //     console.log(res);
    //     return promise2()
    // }).then((res)=>{
    //     console.log(res);
    //     return promise3()
    // }).then((res)=>{
    //     console.log(res);
    // })


    // 用下面写法代替了上面的写法  then.then.then 
    async function listen() {
        let res1 = await promise1();
        console.log('----------------分解线-----------------');
        console.log(res1);
        console.log('----------------end-----------------');

        let res2 = await promise2();
        console.log('----------------分解线-----------------');
        console.log(res2);
        console.log('----------------end-----------------');

        let res3 = await promise3();
        console.log('----------------分解线-----------------');
        console.log(res3);
        console.log('----------------end-----------------');

    }

    listen()
</script>

</html>